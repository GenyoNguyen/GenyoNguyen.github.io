(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2742],{95590:function(e,t,s){Promise.resolve().then(s.bind(s,81190))},81190:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return V}});var r=s(57437),a=s(91743),l=s(99376),n=s(83464),i=s(60330),o=s(2265),c=s(69064),d=s(51817),u=s(66337),f=s(94508),m=s(54702);let h=e=>{let{playbackId:t,courseId:s,chapterId:a,nextChapterId:h,isLocked:x,completeOnEnd:p,title:v}=e,[g,b]=(0,o.useState)(!1),j=(0,l.useRouter)(),y=(0,m.m)(),N=async()=>{try{p&&(await n.Z.put("/api/courses/chapters/progress",{chapterId:a,isCompleted:!0}),h||y.onOpen(),c.Am.success("Progress updated"),j.refresh(),h&&(j.push("/courses/".concat(s,"/chapters/").concat(h)),j.refresh()))}catch(e){c.Am.error("Something went wrong")}};return(0,r.jsxs)("div",{className:"relative aspect-video",children:[!g&&!x&&(0,r.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-800",children:(0,r.jsx)(d.Z,{className:"h-8 w-8 animate-spin text-secondary"})}),x&&(0,r.jsxs)("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-800 flex-col gap-y-2 text-secondary",children:[(0,r.jsx)(u.Z,{className:"h-8 w-8"}),(0,r.jsx)("p",{className:"text-sm",children:"This chapter is locked"})]}),!x&&(0,r.jsx)(i.ZP,{title:v,className:(0,f.cn)(!g&&"hidden"),onCanPlay:()=>b(!0),onEnded:N,autoPlay:!0,playbackId:t||void 0})]})};var x=s(62869),p=s(46039);let v=e=>{let{price:t,courseId:s}=e,[a,l]=(0,o.useState)(!1),i=async()=>{try{l(!0);let e=await n.Z.post("/api/courses/checkout",{courseId:s});window.location.assign(e.data.url)}catch(e){c.ZP.error("Something went wrong")}finally{l(!1)}};return(0,r.jsxs)(x.z,{onClick:i,disabled:a,className:"w-full md:w-auto",size:"sm",children:["Enroll for ",(0,p.T)(t)]})};var g=s(55156);let b=o.forwardRef((e,t)=>{let{className:s,orientation:a="horizontal",decorative:l=!0,...n}=e;return(0,r.jsx)(g.f,{ref:t,decorative:l,orientation:a,className:(0,f.cn)("shrink-0 bg-border","horizontal"===a?"h-[1px] w-full":"h-full w-[1px]",s),...n})});b.displayName=g.f.displayName;var j=s(55364),y=s(69658),N=s(99388),w=s(41671);let I=e=>{let{chapterId:t,courseId:s,isCompleted:a,nextChapterId:i}=e,d=(0,l.useRouter)(),u=(0,m.m)(),[f,h]=(0,o.useState)(!1),p=async()=>{try{h(!0),await n.Z.put("/api/courses/chapters/progress",{chapterId:t,isCompleted:!a}),a||i||u.onOpen(),!a&&i&&d.push("/courses/".concat(s,"/chapters/").concat(i)),c.ZP.success("Progress updated"),d.refresh()}catch(e){c.ZP.error("Something went wrong")}finally{h(!1)}},v=a?N.Z:w.Z;return(0,r.jsxs)(x.z,{onClick:p,disabled:f,type:"button",variant:a?"outline":"success",className:"w-full md:w-auto",children:[a?"Not completed":"Mark as completed",(0,r.jsx)(v,{className:"h-4 w-4 ml-2"})]})};var k=s(64372);let Z=e=>{let{label:t,id:s,isCompleted:a,courseId:n,isLocked:i}=e,o=(0,l.usePathname)(),c=(0,l.useRouter)(),d=i?u.Z:a?w.Z:k.Z,m=null==o?void 0:o.includes(s);return(0,r.jsxs)("button",{onClick:()=>{c.push("/courses/".concat(n,"/chapters/").concat(s))},type:"button",className:(0,f.cn)("flex items-center gap-x-2 text-slate-500 text-sm font-[500] pl-6 transition-all hover:text-slate-600 hover:bg-slate-300/20",m&&"text-slate-700 bg-slate-200/20 hover:bg-slate-200/20 hover:text-slate-700",a&&"text-emerald-700 hover:text-emerald-700",a&&m&&"bg-emerald-200/20"),children:[(0,r.jsxs)("div",{className:"flex items-center gap-x-2 py-4",children:[(0,r.jsx)(d,{size:22,className:(0,f.cn)("text-slate-500",m&&"text-slate-700",a&&"text-emerald-700")}),t]}),(0,r.jsx)("div",{className:(0,f.cn)("ml-auto opacity-0 border-2 border-slate-700 h-full transition-all",m&&"opacity-100",a&&"border-emerald-700")})]})};var C=s(82475),z=s(40924);let M=e=>{let{course:t,progressCount:s}=e,a="user_2n3IHnfFLi6yuQ5GZrtiNlbuMM2",n=(0,l.useRouter)(),[i,u]=(0,o.useState)(),[f,m]=(0,o.useState)(!0);return((0,o.useEffect)(()=>{(async function(){(0,z.dw)("get_purchase",{userId:a,courseId:t.id}).then(e=>{u(e),m(!1)}).catch(e=>c.ZP.error(e))})()},[t.id]),a||n.push("/"),f)?(0,r.jsx)(d.Z,{className:"w-8 h-8 animate-spin"}):(0,r.jsxs)("div",{className:"h-full border-r flex flex-col overflow-y-auto shadow-sm",children:[(0,r.jsxs)("div",{className:"p-8 flex flex-col border-b",children:[(0,r.jsx)("h1",{className:"font-semibold",children:t.title}),i&&(0,r.jsx)("div",{className:"mt-10",children:(0,r.jsx)(C.D,{variant:"success",value:s})})]}),(0,r.jsx)("div",{className:"flex flex-col w-full",children:t.chapters.map(e=>{var s,a;return(0,r.jsx)(Z,{id:e.id,label:e.title,isCompleted:!!(null===(a=e.userProgress)||void 0===a?void 0:null===(s=a[0])||void 0===s?void 0:s.isCompleted),courseId:t.id,isLocked:!e.isFree&&!i},e.id)})})]})};var P=s(27846),S=s(58293),R=s(69304);let _=e=>{let{course:t,progressCount:s}=e;return(0,r.jsxs)(R.yo,{children:[(0,r.jsx)(R.aM,{className:"md:hidden pr-4 hover:opacity-75 transition",children:(0,r.jsx)(S.Z,{})}),(0,r.jsx)(R.ue,{side:"left",className:"p-0 bg-white w-72",children:(0,r.jsx)(M,{course:t,progressCount:s})})]})},E=e=>{let{course:t,progressCount:s}=e;return(0,r.jsxs)("div",{className:"p-4 border-b h-full flex items-center bg-white shadow-sm",children:[(0,r.jsx)(_,{course:t,progressCount:s}),(0,r.jsx)(P.f,{})]})};var O=e=>{let{children:t,course:s,progressCount:a}=e;return(0,l.useRouter)(),(0,r.jsxs)("div",{className:"h-full",children:[(0,r.jsx)("div",{className:"h-[80px] md:pl-80 fixed inset-y-0 w-full z-50",children:(0,r.jsx)(E,{course:s,progressCount:a})}),(0,r.jsx)("div",{className:"hidden md:flex h-full w-80 flex-col fixed inset-y-0 z-50",children:(0,r.jsx)(M,{course:s,progressCount:a})}),(0,r.jsx)("main",{className:"md:pl-80 pt-[80px] h-full",children:t})]})},V=()=>{let e=(0,l.useRouter)(),t=(0,l.useSearchParams)(),s={courseId:t.get("courseId"),chapterId:t.get("chapterId")},i="user_2n3IHnfFLi6yuQ5GZrtiNlbuMM2",[c,u]=(0,o.useState)(),[f,m]=(0,o.useState)(),[x,p]=(0,o.useState)(0);if((0,o.useEffect)(()=>{if(!i)return e.push("/");(async function(){if(u((await n.Z.post("/api/courses/chapters/chapter",{userId:i,courseId:s.courseId,chapterId:s.chapterId})).data),m((await n.Z.post("/api/courses/course/progress",{userId:i,courseId:s.courseId})).data),!f)return e.push("/");p((await n.Z.post("/api/courses/course/progress/count",{userId:i,courseId:s.courseId})).data)})()},[f,s.chapterId,s.courseId,e]),!c||!f)return(0,r.jsx)("div",{children:(0,r.jsx)(d.Z,{className:"w-8 h-8 animate-spin"})});{let{chapter:t,coursePrice:l,muxData:n,attachments:i,nextChapter:o,userProgress:d,purchase:u}=c;if(!t||!l)return e.push("/");let m=!t.isFree&&!u,p=!!u&&!(null==d?void 0:d.isCompleted);return console.log(u),(0,r.jsx)(O,{course:f,progressCount:x,children:(0,r.jsxs)("div",{children:[(null==d?void 0:d.isCompleted)&&(0,r.jsx)(a.j,{variant:"success",label:"You already completed this chapter."}),m&&(0,r.jsx)(a.j,{variant:"warning",label:"You need to purchase this course to watch this chapter."}),(0,r.jsxs)("div",{className:"flex flex-col max-w-4xl mx-auto pb-20",children:[(0,r.jsx)("div",{className:"p-4",children:(0,r.jsx)(h,{chapterId:s.chapterId,title:t.title,courseId:s.courseId,nextChapterId:null==o?void 0:o.id,playbackId:null==n?void 0:n.playbackId,isLocked:m,completeOnEnd:p})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"p-4 flex flex-col md:flex-row items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold mb-2",children:t.title}),u?(0,r.jsx)(I,{chapterId:s.chapterId,courseId:s.courseId,nextChapterId:null==o?void 0:o.id,isCompleted:!!(null==d?void 0:d.isCompleted)}):(0,r.jsx)(v,{courseId:s.courseId,price:l.price})]}),(0,r.jsx)(b,{}),(0,r.jsx)("div",{children:(0,r.jsx)(j.M,{value:t.description})}),!!(null==i?void 0:i.length)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(b,{}),(0,r.jsx)("div",{className:"p-4",children:i.map(e=>(0,r.jsxs)("a",{href:e.url,target:"_blank",className:"flex items-center p-3 w-full bg-sky-200 border text-sky-700 rounded-md hover:underline",children:[(0,r.jsx)(y.Z,{}),(0,r.jsx)("p",{className:"line-clamp-1",children:e.name})]},e.id))})]})]})]})]})})}}},91743:function(e,t,s){"use strict";s.d(t,{j:function(){return d}});var r=s(57437),a=s(76865),l=s(41671),n=s(77712),i=s(94508);let o=(0,n.j)("border text-center p-4 text-sm flex items-center w-full",{variants:{variant:{warning:"bg-yellow-200/40 border-yellow-30 text-primary",success:"bg-emerald-700 border-emerald-800 text-secondary"}},defaultVariants:{variant:"warning"}}),c={warning:a.Z,success:l.Z},d=e=>{let{label:t,variant:s}=e,a=c[s||"warning"];return(0,r.jsxs)("div",{className:(0,i.cn)(o({variant:s})),children:[(0,r.jsx)(a,{className:"h-4 w-4 mr-2"}),t]})}},82475:function(e,t,s){"use strict";s.d(t,{D:function(){return u}});var r=s(57437),a=s(2265),l=s(88753),n=s(94508);let i=(0,s(77712).j)("h-full w-full flex-1 bg-primary transition-all",{variants:{variant:{default:"bg-sky-600",success:"bg-emerald-700"}},defaultVariants:{variant:"default"}}),o=a.forwardRef((e,t)=>{let{className:s,value:a,variant:o,...c}=e;return(0,r.jsx)(l.fC,{ref:t,className:(0,n.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",s),...c,children:(0,r.jsx)(l.z$,{className:(0,n.cn)(i({variant:o})),style:{transform:"translateX(-".concat(100-(a||0),"%)")}})})});o.displayName=l.fC.displayName;let c={default:"text-sky-700",success:"text-emerald-700"},d={default:"text-sm",sm:"text-xs"},u=e=>{let{value:t,variant:s,size:a}=e;return(0,r.jsxs)("div",{children:[(0,r.jsx)(o,{className:"h-2",value:t,variant:s}),(0,r.jsxs)("p",{className:(0,n.cn)("font-medium mt-2 text-sky-700",c[s||"default"],d[a||"default"]),children:[Math.round(t),"% Complete"]})]})}},27846:function(e,t,s){"use strict";s.d(t,{f:function(){return d}});var r=s(57437),a=s(99376),l=s(62869),n=s(47692),i=s(27648),o=s(81296);let c=e=>"user_2n3IHnfFLi6yuQ5GZrtiNlbuMM2"===e,d=()=>{let e=(0,a.usePathname)(),t=null==e?void 0:e.startsWith("/teacher"),s=null==e?void 0:e.includes("/courses");return(0,r.jsxs)(r.Fragment,{children:["/search"===e&&(0,r.jsx)("div",{className:"hidden md:block",children:(0,r.jsx)(o.M,{})}),(0,r.jsx)("div",{className:"flex gap-x-2 ml-auto",children:t||s?(0,r.jsx)(i.default,{href:"/",children:(0,r.jsxs)(l.z,{size:"sm",variant:"ghost",children:[(0,r.jsx)(n.Z,{className:"h-4 w-4 mr-2"}),"Exit"]})}):c("user_2n3IHnfFLi6yuQ5GZrtiNlbuMM2")?(0,r.jsx)(i.default,{href:"/teacher/courses",children:(0,r.jsx)(l.z,{size:"sm",variant:"ghost",children:"Teacher Mode"})}):null})]})}},55364:function(e,t,s){"use strict";s.d(t,{M:function(){return n}});var r=s(57437),a=s(30166),l=s(2265);s(19055);let n=e=>{let{value:t}=e,n=(0,l.useMemo)(()=>(0,a.default)(()=>Promise.all([s.e(3070),s.e(1652),s.e(5600)]).then(s.t.bind(s,5600,23)),{loadableGenerated:{webpack:()=>[5600]},ssr:!1}),[]);return(0,r.jsx)(n,{theme:"bubble",value:t,readOnly:!0})}},81296:function(e,t,s){"use strict";s.d(t,{M:function(){return c}});var r=s(57437),a=s(73247),l=s(95186),n=s(2265),i=s(99376),o=s(78062);let c=()=>{let[e,t]=(0,n.useState)(""),s=function(e,t){let[s,r]=(0,n.useState)(e);return(0,n.useEffect)(()=>{let t=setTimeout(()=>{r(e)},500);return()=>{clearTimeout(t)}},[e,void 0]),s}(e),c=(0,i.useSearchParams)(),d=(0,i.useRouter)(),u=(0,i.usePathname)(),f=c.get("categoryId");return(0,n.useEffect)(()=>{let e=o.Z.stringifyUrl({url:u,query:{categoryId:f,title:s}},{skipEmptyString:!0,skipNull:!0});d.push(e)},[s,f,d,u]),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(a.Z,{className:"h-4 w-4 absolute top-3 left-3 text-slate-600"}),(0,r.jsx)(l.I,{onChange:e=>t(e.target.value),value:e,className:"w-full md:w-[300px] pl-9 rounded-full bg-slate-100 focus-visible:ring-slate-200",placeholder:"Search for a course"})]})}},62869:function(e,t,s){"use strict";s.d(t,{d:function(){return o},z:function(){return c}});var r=s(57437),a=s(2265),l=s(37053),n=s(77712),i=s(94508);let o=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",success:"bg-emerald-600 text-white hover:bg-emerald-600/80"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,t)=>{let{className:s,variant:a,size:n,asChild:c=!1,...d}=e,u=c?l.g7:"button";return(0,r.jsx)(u,{className:(0,i.cn)(o({variant:a,size:n,className:s})),ref:t,...d})});c.displayName="Button"},95186:function(e,t,s){"use strict";s.d(t,{I:function(){return n}});var r=s(57437),a=s(2265),l=s(94508);let n=a.forwardRef((e,t)=>{let{className:s,type:a,...n}=e;return(0,r.jsx)("input",{type:a,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...n})});n.displayName="Input"},69304:function(e,t,s){"use strict";s.d(t,{aM:function(){return d},ue:function(){return h},yo:function(){return c}});var r=s(57437),a=s(2265),l=s(49027),n=s(77712),i=s(32489),o=s(94508);let c=l.fC,d=l.xz;l.x8;let u=l.h_,f=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(l.aV,{className:(0,o.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...a,ref:t})});f.displayName=l.aV.displayName;let m=(0,n.j)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),h=a.forwardRef((e,t)=>{let{side:s="right",className:a,children:n,...c}=e;return(0,r.jsxs)(u,{children:[(0,r.jsx)(f,{}),(0,r.jsxs)(l.VY,{ref:t,className:(0,o.cn)(m({side:s}),a),...c,children:[n,(0,r.jsxs)(l.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,r.jsx)(i.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});h.displayName=l.VY.displayName,a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(l.Dx,{ref:t,className:(0,o.cn)("text-lg font-semibold text-foreground",s),...a})}).displayName=l.Dx.displayName,a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(l.dk,{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",s),...a})}).displayName=l.dk.displayName},54702:function(e,t,s){"use strict";s.d(t,{m:function(){return r}});let r=(0,s(3011).U)(e=>({isOpen:!1,onOpen:()=>e({isOpen:!0}),onClose:()=>e({isOpen:!1})}))},46039:function(e,t,s){"use strict";s.d(t,{T:function(){return r}});let r=e=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e)},94508:function(e,t,s){"use strict";s.d(t,{cn:function(){return l}});var r=s(61994),a=s(53335);function l(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.m6)((0,r.W)(t))}}},function(e){e.O(0,[4672,2404,6137,5262,9064,1006,8662,4854,9430,2971,2117,1744],function(){return e(e.s=95590)}),_N_E=e.O()}]);