(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2789],{92382:function(e,t,s){Promise.resolve().then(s.bind(s,89204))},89204:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return ep}});var r=s(57437),a=s(19716),n=s(25466),l=s(45554),i=s(5187),d=s(69658),o=s(51817),c=s(99376),u=s(31229),m=s(13590),x=s(29501),f=s(88642),p=s(95186),h=s(62869),g=s(45675),j=s(2265),b=s(69064),v=s(40924);let y=u.Ry({title:u.Z_().min(1,{message:"Title is required"})}),N=e=>{let{initialData:t,courseId:s}=e,[a,n]=(0,j.useState)(!1),[l,i]=(0,j.useState)((null==t?void 0:t.title)||""),d=()=>n(e=>!e),o=(0,x.cI)({resolver:(0,m.F)(y),defaultValues:t}),{isSubmitting:c,isValid:u}=o.formState,N=async e=>{console.log(s),(0,v.dw)("update_course",{courseId:s,updates:e}).then(()=>{b.ZP.success("Course updated"),d(),i(e.title)}).catch(e=>b.ZP.error(e))};return(0,r.jsxs)("div",{className:"mt-6 border bg-slate-100 rounded-md p-4",children:[(0,r.jsxs)("div",{className:"font-medium flex items-center justify-between",children:["Course Title",(0,r.jsx)(h.z,{onClick:d,variant:"ghost",children:a?(0,r.jsx)(r.Fragment,{children:"Cancel"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.Z,{className:"h-4 w-4 mr-2"}),"Edit title"]})})]}),!a&&(0,r.jsx)("p",{className:"text-sm mt-2",children:l}),a&&(0,r.jsx)(f.l0,{...o,children:(0,r.jsxs)("form",{onSubmit:o.handleSubmit(N),className:"space-y-4 mt-4",children:[(0,r.jsx)(f.Wi,{control:o.control,name:"title",render:e=>{let{field:t}=e;return(0,r.jsxs)(f.xJ,{children:[(0,r.jsx)(f.NI,{children:(0,r.jsx)(p.I,{disabled:c,placeholder:"e.g. 'Advanced Web Development'",...t})}),(0,r.jsx)(f.zG,{})]})}}),(0,r.jsx)("div",{className:"flex items-center gap-x-2",children:(0,r.jsx)(h.z,{disabled:!u||c,type:"submit",children:"Save"})})]})})]})};var w=s(94508);let C=j.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("textarea",{className:(0,w.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...a})});C.displayName="Textarea";let Z=u.Ry({description:u.Z_().min(1,{message:"Description is required"})}),S=e=>{let{initialData:t,courseId:s}=e,[a,n]=(0,j.useState)(!1),[l,i]=(0,j.useState)((null==t?void 0:t.description)||""),d=()=>n(e=>!e),o=(0,x.cI)({resolver:(0,m.F)(Z),defaultValues:{description:(null==t?void 0:t.description)||""}}),{isSubmitting:c,isValid:u}=o.formState,p=async e=>{console.log(s),(0,v.dw)("update_course",{courseId:s,updates:e}).then(()=>{b.ZP.success("Course updated"),d(),i(e.description)}).catch(e=>b.ZP.error(e))};return(0,r.jsxs)("div",{className:"mt-6 border bg-slate-100 rounded-md p-4",children:[(0,r.jsxs)("div",{className:"font-medium flex items-center justify-between",children:["Course Description",(0,r.jsx)(h.z,{onClick:d,variant:"ghost",children:a?(0,r.jsx)(r.Fragment,{children:"Cancel"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.Z,{className:"h-4 w-4 mr-2"}),"Edit description"]})})]}),!a&&(0,r.jsx)("p",{className:(0,w.cn)("text-sm mt-2",!l&&"text-slate-500 italic"),children:l||"No description"}),a&&(0,r.jsx)(f.l0,{...o,children:(0,r.jsxs)("form",{onSubmit:o.handleSubmit(p),className:"space-y-4 mt-4",children:[(0,r.jsx)(f.Wi,{control:o.control,name:"description",render:e=>{let{field:t}=e;return(0,r.jsxs)(f.xJ,{children:[(0,r.jsx)(f.NI,{children:(0,r.jsx)(C,{disabled:c,placeholder:"e.g. 'This course is about...'",...t})}),(0,r.jsx)(f.zG,{})]})}}),(0,r.jsx)("div",{className:"flex items-center gap-x-2",children:(0,r.jsx)(h.z,{disabled:!u||c,type:"submit",children:"Save"})})]})})]})};var I=s(26937),k=s(53113),z=s(33145),P=s(51037);u.Ry({imageUrl:u.Z_().min(1,{message:"Image is required"})});let R=e=>{let{initialData:t,courseId:s}=e,[a,n]=(0,j.useState)(!1),[l,i]=(0,j.useState)((null==t?void 0:t.imageUrl)||""),d=()=>n(e=>!e),o=async e=>{console.log(s),(0,v.dw)("update_course",{courseId:s,updates:e}).then(()=>{b.ZP.success("Course updated"),d(),i(e.imageUrl)}).catch(e=>b.ZP.error(e))};return(0,r.jsxs)("div",{className:"mt-6 border bg-slate-100 rounded-md p-4",children:[(0,r.jsxs)("div",{className:"font-medium flex items-center justify-between",children:["Course Image",(0,r.jsxs)(h.z,{onClick:d,variant:"ghost",children:[a&&(0,r.jsx)(r.Fragment,{children:"Cancel"}),!a&&!l&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(I.Z,{className:"h-4 w-4 mr-2"}),"Add an image"]}),!a&&l&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.Z,{className:"h-4 w-4 mr-2"}),"Edit image"]})]})]}),!a&&(l?(0,r.jsx)("div",{className:"relative aspect-video mt-2",children:(0,r.jsx)(z.default,{alt:"Upload",fill:!0,className:"object-cover rounded-md",src:l})}):(0,r.jsx)("div",{className:"flex items-center justify-center h-60 bg-slate-200 rounded-md",children:(0,r.jsx)(k.Z,{className:"h-10 w-10 text-slate-500"})})),a&&(0,r.jsxs)("div",{children:[(0,r.jsx)(P.p,{endpoint:"courseImage",onChange:e=>{console.log(e),console.log("Lmao"),e&&o({imageUrl:e})}}),(0,r.jsx)("div",{className:"text-xs text-muted-foreground mt-4",children:"16:9 aspect ratio reccommended"})]})]})};var F=s(24156),_=s(30401),V=s(88899),D=s(73247),Y=s(49027),E=s(32489);Y.fC,Y.xz;let A=Y.h_;Y.x8;let G=j.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(Y.aV,{ref:t,className:(0,w.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...a})});G.displayName=Y.aV.displayName,j.forwardRef((e,t)=>{let{className:s,children:a,...n}=e;return(0,r.jsxs)(A,{children:[(0,r.jsx)(G,{}),(0,r.jsxs)(Y.VY,{ref:t,className:(0,w.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...n,children:[a,(0,r.jsxs)(Y.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(E.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}).displayName=Y.VY.displayName,j.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(Y.Dx,{ref:t,className:(0,w.cn)("text-lg font-semibold leading-none tracking-tight",s),...a})}).displayName=Y.Dx.displayName,j.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(Y.dk,{ref:t,className:(0,w.cn)("text-sm text-muted-foreground",s),...a})}).displayName=Y.dk.displayName;let U=j.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(V.mY,{ref:t,className:(0,w.cn)("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",s),...a})});U.displayName=V.mY.displayName;let O=j.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsxs)("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[(0,r.jsx)(D.Z,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),(0,r.jsx)(V.mY.Input,{ref:t,className:(0,w.cn)("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",s),...a})]})});O.displayName=V.mY.Input.displayName;let L=j.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(V.mY.List,{ref:t,className:(0,w.cn)("max-h-[300px] overflow-y-auto overflow-x-hidden",s),...a})});L.displayName=V.mY.List.displayName;let T=j.forwardRef((e,t)=>(0,r.jsx)(V.mY.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));T.displayName=V.mY.Empty.displayName;let W=j.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(V.mY.Group,{ref:t,className:(0,w.cn)("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",s),...a})});W.displayName=V.mY.Group.displayName,j.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(V.mY.Separator,{ref:t,className:(0,w.cn)("-mx-1 h-px bg-border",s),...a})}).displayName=V.mY.Separator.displayName;let J=j.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(V.mY.Item,{ref:t,className:(0,w.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",s),...a})});J.displayName=V.mY.Item.displayName;var M=s(27312);let q=M.fC,B=M.xz,H=j.forwardRef((e,t)=>{let{className:s,align:a="center",sideOffset:n=4,...l}=e;return(0,r.jsx)(M.h_,{children:(0,r.jsx)(M.VY,{ref:t,align:a,sideOffset:n,className:(0,w.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...l})})});H.displayName=M.VY.displayName;let Q=e=>{var t;let{options:s,value:a}=e,[n,l]=j.useState(!1);return(0,r.jsxs)(q,{open:n,onOpenChange:l,children:[(0,r.jsx)(B,{asChild:!0,children:(0,r.jsxs)(h.z,{variant:"outline",role:"combobox","aria-expanded":n,className:"w-full justify-between",children:[a?null===(t=s.find(e=>e.value===a))||void 0===t?void 0:t.label:"Select option...",(0,r.jsx)(F.Z,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),(0,r.jsx)(H,{className:"w-full p-0",children:(0,r.jsxs)(U,{children:[(0,r.jsx)(O,{placeholder:"Search option..."}),(0,r.jsxs)(L,{children:[(0,r.jsx)(T,{children:"No option found."}),(0,r.jsx)(W,{children:s.map(e=>(0,r.jsxs)(J,{value:e.value,onSelect:()=>{l(!1)},children:[(0,r.jsx)(_.Z,{className:(0,w.cn)("mr-2 h-4 w-4",a===e.value?"opacity-100":"opacity-0")}),e.label]},e.value))})]})]})})]})},$=u.Ry({categoryId:u.Z_().min(1)}),K=e=>{let{initialData:t,courseId:s,options:a}=e,[n,l]=(0,j.useState)(!1),[i,d]=(0,j.useState)((null==t?void 0:t.categoryId)||""),o=()=>l(e=>!e),c=(0,x.cI)({resolver:(0,m.F)($),defaultValues:{categoryId:i||""}}),{isSubmitting:u,isValid:p}=c.formState,y=async e=>{console.log(s),(0,v.dw)("update_course",{courseId:s,updates:e}).then(()=>{b.ZP.success("Course updated"),o(),d(e.categoryId)}).catch(e=>b.ZP.error(e))},N=a.find(e=>e.value===i);return(0,r.jsxs)("div",{className:"mt-6 border bg-slate-100 rounded-md p-4",children:[(0,r.jsxs)("div",{className:"font-medium flex items-center justify-between",children:["Course Category",(0,r.jsx)(h.z,{onClick:o,variant:"ghost",children:n?(0,r.jsx)(r.Fragment,{children:"Cancel"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.Z,{className:"h-4 w-4 mr-2"}),"Edit category"]})})]}),!n&&(0,r.jsx)("p",{className:(0,w.cn)("text-sm mt-2",!i&&"text-slate-500 italic"),children:(null==N?void 0:N.label)||"No category"}),n&&(0,r.jsx)(f.l0,{...c,children:(0,r.jsxs)("form",{onSubmit:c.handleSubmit(y),className:"space-y-4 mt-4",children:[(0,r.jsx)(f.Wi,{control:c.control,name:"categoryId",render:e=>{let{field:t}=e;return(0,r.jsxs)(f.xJ,{children:[(0,r.jsx)(f.NI,{children:(0,r.jsx)(Q,{options:a,...t})}),(0,r.jsx)(f.zG,{})]})}}),(0,r.jsx)("div",{className:"flex items-center gap-x-2",children:(0,r.jsx)(h.z,{disabled:!p||u,type:"submit",children:"Save"})})]})})]})};var X=s(46039);let ee=u.Ry({price:u.oQ.number()}),et=e=>{let{initialData:t,courseId:s}=e,[a,n]=(0,j.useState)(!1),[l,i]=(0,j.useState)((null==t?void 0:t.price)||void 0),d=()=>n(e=>!e),o=(0,x.cI)({resolver:(0,m.F)(ee),defaultValues:{price:l}}),{isSubmitting:c,isValid:u}=o.formState,y=async e=>{console.log(s),(0,v.dw)("update_course",{courseId:s,updates:e}).then(()=>{b.ZP.success("Course updated"),d(),i(e.price)}).catch(e=>b.ZP.error(e))};return(0,r.jsxs)("div",{className:"mt-6 border bg-slate-100 rounded-md p-4",children:[(0,r.jsxs)("div",{className:"font-medium flex items-center justify-between",children:["Course Price",(0,r.jsx)(h.z,{onClick:d,variant:"ghost",children:a?(0,r.jsx)(r.Fragment,{children:"Cancel"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.Z,{className:"h-4 w-4 mr-2"}),"Edit price"]})})]}),!a&&(0,r.jsx)("p",{className:(0,w.cn)("text-sm mt-2",!l&&"text-slate-500 italic"),children:l?(0,X.T)(l):"No price"}),a&&(0,r.jsx)(f.l0,{...o,children:(0,r.jsxs)("form",{onSubmit:o.handleSubmit(y),className:"space-y-4 mt-4",children:[(0,r.jsx)(f.Wi,{control:o.control,name:"price",render:e=>{let{field:t}=e;return(0,r.jsxs)(f.xJ,{children:[(0,r.jsx)(f.NI,{children:(0,r.jsx)(p.I,{type:"number",step:"10000",disabled:c,placeholder:"Set a price for your course",...t})}),(0,r.jsx)(f.zG,{})]})}}),(0,r.jsx)("div",{className:"flex items-center gap-x-2",children:(0,r.jsx)(h.z,{disabled:!u||c,type:"submit",children:"Save"})})]})})]})};u.Ry({url:u.Z_().min(1)});let es=e=>{let{initialData:t,courseId:s}=e,a="user_2n3IHnfFLi6yuQ5GZrtiNlbuMM2",[n,l]=(0,j.useState)(!1),[i,c]=(0,j.useState)(null),[u,m]=(0,j.useState)(t.attachments),x=()=>l(e=>!e),f=async e=>{console.log(s),(0,v.dw)("add_attachment",{userId:a,courseId:s,url:e.url}).then(e=>{b.ZP.success("Attachment added"),x(),m(e)}).catch(e=>b.ZP.error(e))},p=async e=>{c(e),(0,v.dw)("remove_attachment",{attachmentId:e,userId:a,courseId:s}).then(e=>{b.ZP.success("Attachment deleted"),x(),m(e),console.log(u)}).catch(e=>b.ZP.error(e)).finally(()=>{c(null)})};return(0,r.jsxs)("div",{className:"mt-6 border bg-slate-100 rounded-md p-4",children:[(0,r.jsxs)("div",{className:"font-medium flex items-center justify-between",children:["Course Attachments",(0,r.jsxs)(h.z,{onClick:x,variant:"ghost",children:[n&&(0,r.jsx)(r.Fragment,{children:"Cancel"}),!n&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(I.Z,{className:"h-4 w-4 mr-2"}),"Add a file"]})]})]}),!n&&(0,r.jsxs)(r.Fragment,{children:[0===u.length&&(0,r.jsx)("p",{className:"text-sm mt-2 text-slate-500 italic",children:"No attachments yet"}),u.length>0&&(0,r.jsx)("div",{className:"space-y-2",children:u.map(e=>(0,r.jsxs)("div",{className:"flex items-center p-3 w-full bg-sky-100 border-sky-200 border text-sky-700 rounded-md",children:[(0,r.jsx)(d.Z,{className:"h-4 w-4 mr-2 flex-shrink-0"}),(0,r.jsx)("p",{className:"text-xs line-clamp-1",children:e.url}),i===e.id&&(0,r.jsx)("div",{children:(0,r.jsx)(o.Z,{className:"h-4 w-4 animate-spin"})}),i!==e.id&&(0,r.jsx)("button",{className:"ml-auto hover:opacity-75 transition",onClick:()=>p(e.id),children:(0,r.jsx)(E.Z,{className:"h-4 w-4"})})]},e.id))})]}),n&&(0,r.jsxs)("div",{children:[(0,r.jsx)(P.p,{endpoint:"courseAttachment",onChange:e=>{console.log(e),console.log("Lmao"),e&&f({url:e})}}),(0,r.jsx)("div",{className:"text-xs text-muted-foreground mt-4",children:"Add anything your students might need to complete the course."})]})]})};var er=s(83464),ea=s(82762),en=s(4451),el=s(35974);let ei=e=>{let{items:t,onReorder:s,onEdit:a}=e,[n,l]=(0,j.useState)(!1),[i,d]=(0,j.useState)(t);return((0,j.useEffect)(()=>{l(!0)},[]),(0,j.useEffect)(()=>{d(t)},[t]),n)?(0,r.jsx)(ea.Z5,{onDragEnd:e=>{if(!e.destination)return;let t=Array.from(i),[r]=t.splice(e.source.index,1);t.splice(e.destination.index,0,r);let a=Math.min(e.source.index,e.destination.index),n=Math.max(e.source.index,e.destination.index),l=t.slice(a,n+1);d(t),s(l.map(e=>({id:e.id,position:t.findIndex(t=>t.id===e.id)})))},children:(0,r.jsx)(ea.bK,{droppableId:"chapters",children:e=>(0,r.jsxs)("div",{...e.droppableProps,ref:e.innerRef,children:[i.map((e,t)=>(0,r.jsx)(ea._l,{draggableId:e.id,index:t,children:t=>(0,r.jsxs)("div",{className:(0,w.cn)("flex items-center gap-x-2 bg-slate-200 border-slate-200 border text-slate-700 rounded-md mb-4 text-sm",e.isPublished&&"bg-sky-100 border-sky-200 text-sky-700"),ref:t.innerRef,...t.draggableProps,children:[(0,r.jsx)("div",{className:(0,w.cn)("px-2 py-3 border-r border-r-slate-200 hover:bg-slate-300 rounded-l-md transition",e.isPublished&&"border-r-sky-200 hover:bg-sky-200"),...t.dragHandleProps,children:(0,r.jsx)(en.Z,{className:"h-5 w-5"})}),e.title,(0,r.jsxs)("div",{className:"ml-auto pr-2 flex items-center gap-x-2",children:[e.isFree&&(0,r.jsx)(el.C,{children:"Free"}),(0,r.jsx)(el.C,{className:(0,w.cn)("bg-slate-500",e.isPublished&&"bg-sky-700"),children:e.isPublished?"Published":"Draft"}),(0,r.jsx)(g.Z,{onClick:()=>a(e.id),className:"w-4 h-4 cursor-pointer hover:opacity-75 transition"})]})]})},e.id)),e.placeholder]})})}):null},ed=u.Ry({title:u.Z_().min(1)}),eo=e=>{let{initialData:t,courseId:s}=e,[a,n]=(0,j.useState)(!1),[l,i]=(0,j.useState)(!1),d=()=>n(e=>!e),u=(0,c.useRouter)(),g=(0,x.cI)({resolver:(0,m.F)(ed),defaultValues:{title:""}}),{isSubmitting:v,isValid:y}=g.formState,N=async e=>{console.log(s);try{await er.Z.post("/api/courses/chapters",{courseId:s,title:e.title}),b.ZP.success("Chapter created"),d(),u.refresh()}catch(e){b.ZP.error("Something went wrong")}},C=async e=>{try{i(!0),await er.Z.put("/api/courses/chapters/reorder",{courseId:s,list:e}),b.ZP.success("Chapters reordered"),u.refresh()}catch(e){b.ZP.error("Some thing went wrong")}finally{i(!1)}};return(0,r.jsxs)("div",{className:"relative mt-6 border bg-slate-100 rounded-md p-4",children:[l&&(0,r.jsx)("div",{className:"absolute h-full w-full bg-slate-500/20 top-0 right-0 rounded-m flex items-center justify-center",children:(0,r.jsx)(o.Z,{className:"animate-spin h-6 w-6 text-sky-700"})}),(0,r.jsxs)("div",{className:"font-medium flex items-center justify-between",children:["Course Chapters",(0,r.jsx)(h.z,{onClick:d,variant:"ghost",children:a?(0,r.jsx)(r.Fragment,{children:"Cancel"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(I.Z,{className:"h-4 w-4 mr-2"}),"Add a chapter"]})})]}),a&&(0,r.jsx)(f.l0,{...g,children:(0,r.jsxs)("form",{onSubmit:g.handleSubmit(N),className:"space-y-4 mt-4",children:[(0,r.jsx)(f.Wi,{control:g.control,name:"title",render:e=>{let{field:t}=e;return(0,r.jsxs)(f.xJ,{children:[(0,r.jsx)(f.NI,{children:(0,r.jsx)(p.I,{disabled:v,placeholder:"e.g. 'Introduction to the course'",...t})}),(0,r.jsx)(f.zG,{})]})}}),(0,r.jsx)("div",{className:"flex items-center gap-x-2",children:(0,r.jsx)(h.z,{disabled:!y||v,type:"submit",children:"Create"})})]})}),!a&&(0,r.jsxs)("div",{className:(0,w.cn)("text-sm mt-2",!t.chapters.length&&"text-slate-500 italic"),children:[!t.chapters.length&&"No chapters",(0,r.jsx)(ei,{onEdit:e=>{let t=new URLSearchParams;t.set("courseId",s),t.set("chapterId",e),u.push("/teacher/courses/chapters?".concat(t.toString()))},onReorder:C,items:t.chapters||[]})]}),!a&&(0,r.jsx)("p",{className:"text-xs text-muted-foreground mt-4",children:"Drag and drop to reorder the chapters"})]})};var ec=s(91743),eu=s(6216),em=s(54702),ex=s(27413);let ef=e=>{let{disabled:t,courseId:s,isPublished:a}=e,n=(0,c.useRouter)(),l=(0,em.m)(),[i,d]=(0,j.useState)(!1),o=async()=>{try{d(!0),a?(await er.Z.patch("/api/courses/unpublish",{courseId:s}),b.ZP.success("Course unpublished")):(await er.Z.patch("/api/courses/publish",{courseId:s}),b.ZP.success("Course published"),l.onOpen()),n.refresh()}catch(e){b.ZP.error("Something went wrong")}finally{d(!1)}},u=async()=>{try{d(!0),await er.Z.patch("/api/courses/delete",{courseId:s}),b.ZP.success("Course deleted"),n.push("/teacher/courses"),n.refresh()}catch(e){b.ZP.error("Something went wrong")}finally{d(!1)}};return(0,r.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,r.jsx)(h.z,{onClick:o,disabled:t||i,variant:"outline",size:"sm",children:a?"Unpublish":"Publish"}),(0,r.jsx)(eu.s,{onConfirm:u,children:(0,r.jsx)(h.z,{size:"sm",disabled:i,children:(0,r.jsx)(ex.Z,{className:"h-4 w-4"})})})]})};var ep=()=>{let e=(0,c.useSearchParams)().get("courseId"),[t,s]=(0,j.useState)(),[u,m]=(0,j.useState)(),[x,f]=(0,j.useState)(!0);if((0,j.useEffect)(()=>{(async function(){s((await er.Z.post("/api/teacher/course",{courseId:e})).data),m((await er.Z.get("/api/teacher/categories")).data),f(!1)})()},[e]),!t&&!x)return(0,c.redirect)("/");if(!t||!u)return(0,r.jsx)(o.Z,{className:"w-8 h-8 animate-spin"});{let s=[t.title,t.description,t.imageUrl,t.price,t.categoryId,t.chapters.some(e=>e.isPublished)],o=s.length,c=s.filter(Boolean).length,m="(".concat(c,"/").concat(o,")"),x=s.every(Boolean);return(0,r.jsxs)(r.Fragment,{children:[!t.isPublished&&(0,r.jsx)(ec.j,{label:"This course is unpublished. It will not be visible to the students."}),(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,r.jsx)("h1",{className:"text-2xl font-medium",children:"Course Setup"}),(0,r.jsxs)("span",{className:"text-sm text-slate-700",children:["Complete all fields ",m]})]}),(0,r.jsx)(ef,{disabled:!x,courseId:e,isPublished:t.isPublished})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-16",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,r.jsx)(a.G,{icon:n.Z}),(0,r.jsx)("h2",{className:"text-xl",children:"Customize your course"})]}),(0,r.jsx)(N,{initialData:t,courseId:t.id}),(0,r.jsx)(S,{initialData:t,courseId:t.id}),(0,r.jsx)(R,{initialData:t,courseId:t.id}),(0,r.jsx)(K,{initialData:t,courseId:t.id,options:u.map(e=>({label:e.name,value:e.id}))})]}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,r.jsx)(a.G,{icon:l.Z}),(0,r.jsx)("h2",{className:"text-xl",children:"Course Chapters"})]}),(0,r.jsx)(eo,{initialData:t,courseId:t.id})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,r.jsx)(a.G,{icon:i.Z}),(0,r.jsx)("h2",{className:"text-xl",children:"Sell your course"})]}),(0,r.jsx)(et,{initialData:t,courseId:t.id})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,r.jsx)(a.G,{icon:d.Z}),(0,r.jsx)("h2",{className:"text-xl",children:"Resources & Attachments"})]}),(0,r.jsx)(es,{initialData:t,courseId:t.id})]})]})]})]})]})}}},91743:function(e,t,s){"use strict";s.d(t,{j:function(){return c}});var r=s(57437),a=s(76865),n=s(41671),l=s(77712),i=s(94508);let d=(0,l.j)("border text-center p-4 text-sm flex items-center w-full",{variants:{variant:{warning:"bg-yellow-200/40 border-yellow-30 text-primary",success:"bg-emerald-700 border-emerald-800 text-secondary"}},defaultVariants:{variant:"warning"}}),o={warning:a.Z,success:n.Z},c=e=>{let{label:t,variant:s}=e,a=o[s||"warning"];return(0,r.jsxs)("div",{className:(0,i.cn)(d({variant:s})),children:[(0,r.jsx)(a,{className:"h-4 w-4 mr-2"}),t]})}},51037:function(e,t,s){"use strict";s.d(t,{p:function(){return i}});var r=s(57437),a=s(85133);(0,a.gR)();let n=(0,a.Lo)();var l=s(69064);let i=e=>{let{onChange:t,endpoint:s}=e;return(0,r.jsx)(n,{endpoint:s,onClientUploadComplete:e=>{console.log("Files:",e),t(null==e?void 0:e[0].url),l.ZP.success("Upload Completed")},onUploadError:e=>{l.ZP.error("".concat(e.message))}})}},19716:function(e,t,s){"use strict";s.d(t,{G:function(){return d}});var r=s(57437),a=s(77712),n=s(94508);let l=(0,a.j)("rounded-full flex items-center justify-center",{variants:{variant:{default:"bg-sky-100",success:"bg-emerald-100"},size:{default:"p-2",sm:"p-1"}},defaultVariants:{variant:"default",size:"default"}}),i=(0,a.j)("",{variants:{variant:{default:"text-sky-700",success:"text-emerald-700"},size:{default:"h-8 w-8",sm:"h-4 w-4"}},defaultVariants:{variant:"default",size:"default"}}),d=e=>{let{icon:t,variant:s,size:a}=e;return(0,r.jsx)("div",{className:(0,n.cn)(l({variant:s,size:a})),children:(0,r.jsx)(t,{className:(0,n.cn)(i({variant:s,size:a}))})})}},6216:function(e,t,s){"use strict";s.d(t,{s:function(){return b}});var r=s(57437),a=s(2265),n=s(90277),l=s(94508),i=s(62869);let d=n.fC,o=n.xz,c=n.h_,u=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.aV,{className:(0,l.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...a,ref:t})});u.displayName=n.aV.displayName;let m=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsxs)(c,{children:[(0,r.jsx)(u,{}),(0,r.jsx)(n.VY,{ref:t,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...a})]})});m.displayName=n.VY.displayName;let x=e=>{let{className:t,...s}=e;return(0,r.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...s})};x.displayName="AlertDialogHeader";let f=e=>{let{className:t,...s}=e;return(0,r.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s})};f.displayName="AlertDialogFooter";let p=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.Dx,{ref:t,className:(0,l.cn)("text-lg font-semibold",s),...a})});p.displayName=n.Dx.displayName;let h=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.dk,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",s),...a})});h.displayName=n.dk.displayName;let g=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.aU,{ref:t,className:(0,l.cn)((0,i.d)(),s),...a})});g.displayName=n.aU.displayName;let j=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.$j,{ref:t,className:(0,l.cn)((0,i.d)({variant:"outline"}),"mt-2 sm:mt-0",s),...a})});j.displayName=n.$j.displayName;let b=e=>{let{children:t,onConfirm:s}=e;return(0,r.jsxs)(d,{children:[(0,r.jsx)(o,{asChild:!0,children:t}),(0,r.jsxs)(m,{children:[(0,r.jsxs)(x,{children:[(0,r.jsx)(p,{children:"Are you sure?"}),(0,r.jsx)(h,{children:"This action cannot be undone."})]}),(0,r.jsxs)(f,{children:[(0,r.jsx)(j,{children:"Cancel"}),(0,r.jsx)(g,{onClick:s,children:"Continue"})]})]})]})}},35974:function(e,t,s){"use strict";s.d(t,{C:function(){return i}});var r=s(57437);s(2265);var a=s(77712),n=s(94508);let l=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:s,...a}=e;return(0,r.jsx)("div",{className:(0,n.cn)(l({variant:s}),t),...a})}},62869:function(e,t,s){"use strict";s.d(t,{d:function(){return d},z:function(){return o}});var r=s(57437),a=s(2265),n=s(37053),l=s(77712),i=s(94508);let d=(0,l.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",success:"bg-emerald-600 text-white hover:bg-emerald-600/80"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=a.forwardRef((e,t)=>{let{className:s,variant:a,size:l,asChild:o=!1,...c}=e,u=o?n.g7:"button";return(0,r.jsx)(u,{className:(0,i.cn)(d({variant:a,size:l,className:s})),ref:t,...c})});o.displayName="Button"},88642:function(e,t,s){"use strict";s.d(t,{l0:function(){return u},NI:function(){return j},pf:function(){return b},Wi:function(){return x},xJ:function(){return h},lX:function(){return g},zG:function(){return v}});var r=s(57437),a=s(2265),n=s(37053),l=s(29501),i=s(94508),d=s(6394);let o=(0,s(77712).j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(d.f,{ref:t,className:(0,i.cn)(o(),s),...a})});c.displayName=d.f.displayName;let u=l.RV,m=a.createContext({}),x=e=>{let{...t}=e;return(0,r.jsx)(m.Provider,{value:{name:t.name},children:(0,r.jsx)(l.Qr,{...t})})},f=()=>{let e=a.useContext(m),t=a.useContext(p),{getFieldState:s,formState:r}=(0,l.Gc)(),n=s(e.name,r);if(!e)throw Error("useFormField should be used within <FormField>");let{id:i}=t;return{id:i,name:e.name,formItemId:"".concat(i,"-form-item"),formDescriptionId:"".concat(i,"-form-item-description"),formMessageId:"".concat(i,"-form-item-message"),...n}},p=a.createContext({}),h=a.forwardRef((e,t)=>{let{className:s,...n}=e,l=a.useId();return(0,r.jsx)(p.Provider,{value:{id:l},children:(0,r.jsx)("div",{ref:t,className:(0,i.cn)("space-y-2",s),...n})})});h.displayName="FormItem";let g=a.forwardRef((e,t)=>{let{className:s,...a}=e,{error:n,formItemId:l}=f();return(0,r.jsx)(c,{ref:t,className:(0,i.cn)(n&&"text-destructive",s),htmlFor:l,...a})});g.displayName="FormLabel";let j=a.forwardRef((e,t)=>{let{...s}=e,{error:a,formItemId:l,formDescriptionId:i,formMessageId:d}=f();return(0,r.jsx)(n.g7,{ref:t,id:l,"aria-describedby":a?"".concat(i," ").concat(d):"".concat(i),"aria-invalid":!!a,...s})});j.displayName="FormControl";let b=a.forwardRef((e,t)=>{let{className:s,...a}=e,{formDescriptionId:n}=f();return(0,r.jsx)("p",{ref:t,id:n,className:(0,i.cn)("text-sm text-muted-foreground",s),...a})});b.displayName="FormDescription";let v=a.forwardRef((e,t)=>{let{className:s,children:a,...n}=e,{error:l,formMessageId:d}=f(),o=l?String(null==l?void 0:l.message):a;return o?(0,r.jsx)("p",{ref:t,id:d,className:(0,i.cn)("text-sm font-medium text-destructive",s),...n,children:o}):null});v.displayName="FormMessage"},95186:function(e,t,s){"use strict";s.d(t,{I:function(){return l}});var r=s(57437),a=s(2265),n=s(94508);let l=a.forwardRef((e,t)=>{let{className:s,type:a,...l}=e;return(0,r.jsx)("input",{type:a,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...l})});l.displayName="Input"},54702:function(e,t,s){"use strict";s.d(t,{m:function(){return r}});let r=(0,s(3011).U)(e=>({isOpen:!1,onOpen:()=>e({isOpen:!0}),onClose:()=>e({isOpen:!1})}))},46039:function(e,t,s){"use strict";s.d(t,{T:function(){return r}});let r=e=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e)},94508:function(e,t,s){"use strict";s.d(t,{cn:function(){return n}});var r=s(61994),a=s(53335);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.m6)((0,r.W)(t))}}},function(e){e.O(0,[3338,6137,9064,1006,8662,3145,8658,5246,8423,84,2971,2117,1744],function(){return e(e.s=92382)}),_N_E=e.O()}]);