(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4681],{51659:function(e,t,r){Promise.resolve().then(r.bind(r,78722))},78722:function(e,t,r){"use strict";r.d(t,{default:function(){return v}});var l=r(57437),a=r(2265),n=r(45563),o=r(94508),s=r(45675),i=r(79205);let c=(0,i.Z)("Eraser",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]]),u=(0,i.Z)("Paintbrush",[["path",{d:"m14.622 17.897-10.68-2.913",key:"vj2p1u"}],["path",{d:"M18.376 2.622a1 1 0 1 1 3.002 3.002L17.36 9.643a.5.5 0 0 0 0 .707l.944.944a2.41 2.41 0 0 1 0 3.408l-.944.944a.5.5 0 0 1-.707 0L8.354 7.348a.5.5 0 0 1 0-.707l.944-.944a2.41 2.41 0 0 1 3.408 0l.944.944a.5.5 0 0 0 .707 0z",key:"18tc5c"}],["path",{d:"M9 8c-1.804 2.71-3.97 3.46-6.583 3.948a.507.507 0 0 0-.302.819l7.32 8.883a1 1 0 0 0 1.185.204C12.735 20.405 16 16.792 16 15",key:"ytzfxy"}]]),d=(0,i.Z)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),h=(0,i.Z)("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);var g=r(40519);let p=(0,i.Z)("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]),x=(0,i.Z)("MousePointer",[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]]),y=(0,i.Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);var f=r(10407);let b=(0,i.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),w=(0,i.Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),m=(0,i.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var v=()=>{let[e,t]=(0,a.useState)([{id:1,data:null,toolState:{color:"#000000",tool:"pencil",size:2}}]),[r,i]=(0,a.useState)(0),v=(0,a.useRef)(null),k=(0,a.useRef)(null),[j,F]=(0,a.useState)(!1),[N,S]=(0,a.useState)(null),{isDark:C}=(0,a.useContext)(n.N),[M,Z]=(0,a.useState)("#000000"),[P,z]=(0,a.useState)("pencil"),[E,L]=(0,a.useState)(2),[R,D]=(0,a.useState)(null),[W,T]=(0,a.useState)(!1),[I,A]=(0,a.useState)(null),[_,q]=(0,a.useState)(null),[B,K]=(0,a.useState)([]),[U,X]=(0,a.useState)(-1),Y=function(){let l=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(v.current&&N){let a=v.current.toDataURL();if(!l){let e=B.slice(0,U+1);e.push(a),K(e),X(e.length-1)}let n=[...e];n[r]={...n[r],data:a,toolState:{color:M,tool:P,size:E}},t(n)}},H=e=>{if(v.current&&N){if(e){let t=new Image;t.onload=()=>{N.fillStyle="#FFFFFF",N.fillRect(0,0,v.current.width,v.current.height),N.drawImage(t,0,0)},t.src=e}else N.fillStyle="#FFFFFF",N.fillRect(0,0,v.current.width,v.current.height)}};(0,a.useEffect)(()=>{if(v.current){let t=v.current,l=t.getContext("2d");if(l){S(l);let a=e[r].toolState;l.strokeStyle="eraser"===a.tool?"#FFFFFF":a.color,l.lineWidth=a.size,l.lineJoin="round",l.lineCap="round",l.fillStyle="#FFFFFF",l.fillRect(0,0,t.width,t.height),H(e[r].data),K([t.toDataURL()]),X(0)}}T(!1),A(null)},[r,C,e]),(0,a.useEffect)(()=>{N&&(N.strokeStyle="eraser"===P?"#FFFFFF":M,N.lineWidth=E)},[P,M,E,N]),(0,a.useEffect)(()=>{let e=e=>{(e.ctrlKey||e.metaKey)&&"z"===e.key&&(e.preventDefault(),O())};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[U,B]);let O=()=>{if(U>0){let e=U-1;X(e),H(B[e]),Y(!0)}},V=e=>{if(!N)return;let{startX:t,startY:r,endX:l,endY:a,color:n,lineWidth:o}=e;N.beginPath(),N.strokeStyle=n,N.lineWidth=o,N.moveTo(t,r),N.lineTo(l,a),N.stroke(),N.closePath()},$=e=>{if(!N)return;let{startX:t,startY:r,endX:l,endY:a,color:n,lineWidth:o}=e;N.beginPath(),N.strokeStyle=n,N.lineWidth=o,N.rect(t,r,l-t,a-r),N.stroke(),N.closePath()},J=e=>{if(!N)return;let{startX:t,startY:r,endX:l,endY:a,color:n,lineWidth:o}=e;N.beginPath(),N.strokeStyle=n,N.lineWidth=o,N.arc(t,r,Math.sqrt(Math.pow(l-t,2)+Math.pow(a-r,2)),0,2*Math.PI),N.stroke(),N.closePath()},G=(e,t)=>{A({x:e,y:t}),T(!0),k.current&&(k.current.style.left="".concat(e,"px"),k.current.style.top="".concat(t,"px"),k.current.focus())},Q=(e,t)=>{if(N){let r=N.getImageData(e,t,1,1).data;Z("#".concat([r[0],r[1],r[2]].map(e=>e.toString(16).padStart(2,"0")).join("")))}},ee=()=>{j&&(N&&!["line","rectangle","circle"].includes(P)&&N.closePath(),F(!1),q(null),Y())},et=t=>{Y(),"prev"===t&&r>0?i(r-1):"next"===t&&r<e.length-1&&i(r+1)},er=e=>{let{tool:t,icon:r,tooltip:a}=e;return(0,l.jsxs)("button",{onClick:()=>z(t),className:(0,o.cn)("p-3 rounded-lg transition-all duration-300 relative group",P===t?C?"bg-blue-600 hover:bg-blue-500 shadow-lg shadow-blue-500/20":"bg-blue-500 hover:bg-blue-400 shadow-lg shadow-blue-300/30":C?"bg-gray-700 hover:bg-gray-600":"bg-gray-100 hover:bg-gray-200"),children:[(0,l.jsx)(r,{className:(0,o.cn)("w-5 h-5",P===t?"text-white":C?"text-gray-300":"text-gray-600")}),(0,l.jsx)("span",{className:"absolute -bottom-8 left-1/2 transform -translate-x-1/2 bg-black text-white px-2 py-1 rounded text-xs opacity-0 group-hover:opacity-100 transition-opacity",children:a})]})};return(0,l.jsxs)("div",{className:(0,o.cn)("flex flex-col items-center justify-center min-h-screen w-full p-6 space-y-6",C?"bg-gradient-to-b from-gray-900 to-gray-800":"bg-gradient-to-b from-gray-50 to-gray-100"),children:[(0,l.jsxs)("div",{className:(0,o.cn)("flex items-center space-x-6 p-4 rounded-xl shadow-lg backdrop-blur-sm",C?"bg-gray-800/90":"bg-white/90"),children:[(0,l.jsxs)("div",{className:"flex space-x-2",children:[(0,l.jsx)(er,{tool:"pencil",icon:s.Z,tooltip:"Pencil"}),(0,l.jsx)(er,{tool:"eraser",icon:c,tooltip:"Eraser"}),(0,l.jsx)(er,{tool:"brush",icon:u,tooltip:"Brush"}),(0,l.jsx)(er,{tool:"line",icon:d,tooltip:"Line"}),(0,l.jsx)(er,{tool:"rectangle",icon:h,tooltip:"Rectangle"}),(0,l.jsx)(er,{tool:"circle",icon:g.Z,tooltip:"Circle"}),(0,l.jsx)(er,{tool:"text",icon:p,tooltip:"Text"}),(0,l.jsx)(er,{tool:"dropper",icon:x,tooltip:"Color Picker"})]}),(0,l.jsx)("div",{className:(0,o.cn)("h-6 w-px",C?"bg-gray-600":"bg-gray-300")}),(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsx)("input",{type:"color",value:M,onChange:e=>{let t=e.target.value;Z(t),N&&"eraser"!==P&&(N.strokeStyle=t)},className:"w-10 h-10 rounded-lg cursor-pointer border-2 border-opacity-50 transition-transform hover:scale-105"}),(0,l.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,l.jsx)("span",{className:C?"text-gray-300":"text-gray-600",children:"Size:"}),(0,l.jsx)("input",{type:"range",min:"1",max:"20",value:E,onChange:e=>{let t=parseInt(e.target.value);L(t),N&&(N.lineWidth=t)},className:"w-32 accent-blue-500"})]})]})]}),(0,l.jsxs)("div",{className:"flex items-center justify-center relative w-full",children:[e.length>1&&(0,l.jsx)("button",{onClick:()=>et("prev"),disabled:0===r,className:(0,o.cn)("absolute left-4 p-4 rounded-full transition-all duration-300 shadow-lg",C?"bg-gray-700 hover:bg-gray-600 disabled:bg-gray-800":"bg-white hover:bg-gray-50 disabled:bg-gray-100","disabled:cursor-not-allowed disabled:opacity-50"),children:(0,l.jsx)(y,{className:(0,o.cn)("w-6 h-6",C?"text-gray-200":"text-gray-700")})}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("canvas",{ref:v,onMouseDown:e=>{var t;let r=null===(t=v.current)||void 0===t?void 0:t.getBoundingClientRect();if(!r)return;let l=e.clientX-r.left,a=e.clientY-r.top;if("dropper"===P){Q(l,a);return}if("text"===P){G(l,a);return}F(!0),D({x:l,y:a}),["line","rectangle","circle"].includes(P)?N&&v.current&&q(N.getImageData(0,0,v.current.width,v.current.height)):N&&(N.beginPath(),N.moveTo(l,a),N.strokeStyle="eraser"===P?"#FFFFFF":M,N.lineWidth=E)},onMouseMove:e=>{if(!j||!N||!v.current||!R)return;let t=v.current.getBoundingClientRect(),r=e.clientX-t.left,l=e.clientY-t.top;if(["line","rectangle","circle"].includes(P)){_&&N.putImageData(_,0,0);let e={startX:R.x,startY:R.y,endX:r,endY:l,color:M,lineWidth:E};switch(P){case"line":V(e);break;case"rectangle":$(e);break;case"circle":J(e)}}else N.lineTo(r,l),N.stroke()},onMouseUp:ee,onMouseLeave:ee,width:1050,height:650,className:"rounded-xl shadow-xl bg-white"}),W&&(0,l.jsx)("textarea",{ref:k,onKeyDown:e=>{if("Enter"===e.key&&!e.shiftKey&&N&&I){e.preventDefault();let t=e.target.value;N.font="".concat(8*E,"px Arial"),N.fillStyle=M,N.fillText(t,I.x,I.y),T(!1),A(null),k.current&&(k.current.value=""),Y()}},className:"absolute z-10 bg-transparent outline-none resize-none",style:{left:"".concat(null==I?void 0:I.x,"px"),top:"".concat(null==I?void 0:I.y,"px"),color:M,fontSize:"".concat(8*E,"px")}})]}),e.length>1&&(0,l.jsx)("button",{onClick:()=>et("next"),disabled:r===e.length-1,className:(0,o.cn)("absolute right-4 p-4 rounded-full transition-all duration-300 shadow-lg",C?"bg-gray-700 hover:bg-gray-600 disabled:bg-gray-800":"bg-white hover:bg-gray-50 disabled:bg-gray-100","disabled:cursor-not-allowed disabled:opacity-50"),children:(0,l.jsx)(f.Z,{className:(0,o.cn)("w-6 h-6",C?"text-gray-200":"text-gray-700")})})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between w-full max-w-[1200px]",children:[(0,l.jsxs)("span",{className:(0,o.cn)("px-4 py-2 rounded-md font-medium",C?"bg-gray-800 text-gray-200":"bg-white text-gray-700"),children:["Page ",r+1," of ",e.length]}),(0,l.jsxs)("div",{className:"flex space-x-4",children:[(0,l.jsxs)("button",{onClick:()=>{v.current&&N&&(N.fillStyle="#FFFFFF",N.fillRect(0,0,v.current.width,v.current.height),Y())},className:(0,o.cn)("px-4 py-2 rounded-lg transition-all duration-300 flex items-center space-x-2",C?"bg-red-600 hover:bg-red-500 text-white shadow-lg shadow-red-500/20":"bg-red-500 hover:bg-red-400 text-white shadow-lg shadow-red-300/30"),children:[(0,l.jsx)(b,{className:"w-5 h-5"}),(0,l.jsx)("span",{children:"Clear"})]}),(0,l.jsxs)("button",{onClick:()=>{if(v.current){let e=document.createElement("a");e.href=v.current.toDataURL("image/png"),e.download="canvas-drawing-page-".concat(r+1,".png"),e.click()}},className:(0,o.cn)("px-4 py-2 rounded-lg transition-all duration-300 flex items-center space-x-2",C?"bg-green-600 hover:bg-green-500 text-white shadow-lg shadow-green-500/20":"bg-green-500 hover:bg-green-400 text-white shadow-lg shadow-green-300/30"),children:[(0,l.jsx)(w,{className:"w-5 h-5"}),(0,l.jsx)("span",{children:"Download"})]}),(0,l.jsxs)("button",{onClick:()=>{Y();let r={id:e.length+1,data:null,toolState:{color:M,tool:P,size:E}};t([...e,r]),i(e.length),K([]),X(-1)},className:(0,o.cn)("px-4 py-2 rounded-lg transition-all duration-300 flex items-center space-x-2",C?"bg-purple-600 hover:bg-purple-500 text-white shadow-lg shadow-purple-500/20":"bg-purple-500 hover:bg-purple-400 text-white shadow-lg shadow-purple-300/30"),children:[(0,l.jsx)(m,{className:"w-5 h-5"}),(0,l.jsx)("span",{children:"New Page"})]})]})]})]})}},45563:function(e,t,r){"use strict";r.d(t,{N:function(){return l}});let l=(0,r(2265).createContext)({isDark:!1,toggleDarkMode:()=>{}})},94508:function(e,t,r){"use strict";r.d(t,{cn:function(){return n}});var l=r(61994),a=r(53335);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.m6)((0,l.W)(t))}},79205:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var l=r(2265);let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&r.indexOf(e)===t).join(" ")};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let s=(0,l.forwardRef)((e,t)=>{let{color:r="currentColor",size:a=24,strokeWidth:s=2,absoluteStrokeWidth:i,className:c="",children:u,iconNode:d,...h}=e;return(0,l.createElement)("svg",{ref:t,...o,width:a,height:a,stroke:r,strokeWidth:i?24*Number(s)/Number(a):s,className:n("lucide",c),...h},[...d.map(e=>{let[t,r]=e;return(0,l.createElement)(t,r)}),...Array.isArray(u)?u:[u]])}),i=(e,t)=>{let r=(0,l.forwardRef)((r,o)=>{let{className:i,...c}=r;return(0,l.createElement)(s,{ref:o,iconNode:t,className:n("lucide-".concat(a(e)),i),...c})});return r.displayName="".concat(e),r}},10407:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});let l=(0,r(79205).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},40519:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});let l=(0,r(79205).Z)("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},45675:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});let l=(0,r(79205).Z)("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])}},function(e){e.O(0,[6137,2971,2117,1744],function(){return e(e.s=51659)}),_N_E=e.O()}]);