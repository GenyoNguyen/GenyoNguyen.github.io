(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7212],{99938:function(e,t,s){Promise.resolve().then(s.bind(s,92467))},92467:function(e,t,s){"use strict";var a=s(57437),n=s(2265),r=s(40924),i=s(2296),c=s(48614),o=s(26298),l=s(94508);s(66458);var d=s(45563);let u=["/bg1.png","/bg2.png","/bg3.png"];t.default=()=>{let{isDark:e}=(0,n.useContext)(d.N),[t,s]=(0,n.useState)(""),[g,m]=(0,n.useState)([]),[h,p]=(0,n.useState)(""),[y,b]=(0,n.useState)(!1),[x,v]=(0,n.useState)(!0),[f,j]=(0,n.useState)(""),[N,k]=(0,n.useState)(!1),w=(0,n.useRef)(null),C=(0,n.useRef)(null);(0,n.useEffect)(()=>{var e;null===(e=w.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[g,h,y]);let E=async()=>{if(""===t.trim())return;let e={id:"user-".concat(Date.now()),sender:"user",text:t,timestamp:new Date};m(t=>[...t,e]),s(""),v(!0);try{b(!0);let e=await (0,r.dw)("generate_text",{prompt:t,sampleLen:400});C.current&&(C.current.classList.add("success-flash"),setTimeout(()=>{var e;null===(e=C.current)||void 0===e||e.classList.remove("success-flash")},1e3)),S(e)}catch(t){console.error("Error generating text:",t);let e={id:"error-".concat(Date.now()),sender:"bot",text:"Sorry, I encountered an error. Please try again.",timestamp:new Date};m(t=>[...t,e]),b(!1),C.current&&(C.current.classList.add("error-flash"),setTimeout(()=>{var e;null===(e=C.current)||void 0===e||e.classList.remove("error-flash")},1e3))}},S=e=>{p("");let t=-1,s=()=>{if(t<e.length)p(s=>s+e[t]),t++,setTimeout(s,20);else{let t={id:"bot-".concat(Date.now()),sender:"bot",text:e,timestamp:new Date};m(e=>[...e,t]),p(""),b(!1)}};s()},D=e=>e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"}),_=e=>{j(e)},L=async()=>{m([]),s(""),p(""),b(!1),v(!0),j("bg3.png");try{await (0,r.dw)("clear_history"),console.log("Chat history cleared successfully")}catch(e){console.error("Error clearing chat history:",e)}};return(0,a.jsxs)("div",{className:(0,l.cn)("chatbot-container",e&&"dark"),children:[(0,a.jsx)("div",{className:"chatbot-controls",children:(0,a.jsx)("button",{onClick:()=>k(!N),className:(0,l.cn)("settings-button",e&&"bg-gray-800 text-white border-gray-700"),children:"Settings"})}),N&&(0,a.jsxs)("div",{className:(0,l.cn)("settings-menu",e&&"bg-gray-800 text-white"),children:[(0,a.jsx)("button",{onClick:L,className:"reset-button",children:"Reset Conversation!"}),(0,a.jsxs)("div",{className:"background-selector",children:[(0,a.jsx)("span",{children:"Choose background:"}),(0,a.jsx)("div",{className:"background-options",children:u.map((t,s)=>(0,a.jsx)("button",{className:(0,l.cn)("background-button",f===t&&"selected",e&&"border-gray-600"),style:{backgroundImage:"url(".concat(t,")"),border:f===t?"2px solid #0084ff":e?"2px solid #4a5568":"2px solid transparent"},onClick:()=>_(t)},s))})]})]}),(0,a.jsxs)("div",{className:"chat-history",style:{backgroundImage:f?"url(".concat(f,")"):"none"},children:[(0,a.jsx)(c.M,{children:g.map(t=>(0,a.jsx)(o.E.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,scale:.95},transition:{type:"spring",duration:.5},className:(0,l.cn)("chat-message",t.sender,e&&"dark"),children:(0,a.jsxs)("div",{className:"message-content",children:["bot"===t.sender?(0,a.jsx)(i.U,{children:t.text}):(0,a.jsx)("span",{children:t.text}),(0,a.jsx)("span",{className:"message-timestamp",children:D(t.timestamp)})]})},t.id))}),h&&(0,a.jsx)(o.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:(0,l.cn)("chat-message bot",e&&"dark"),children:(0,a.jsx)("div",{className:"message-content",children:(0,a.jsx)(i.U,{children:h})})}),y&&!h&&(0,a.jsx)(o.E.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:(0,l.cn)("chat-message bot",e&&"dark"),children:(0,a.jsxs)("div",{className:"message-content typing-indicator",children:[(0,a.jsx)("div",{className:"typing-dot"}),(0,a.jsx)("div",{className:"typing-dot"}),(0,a.jsx)("div",{className:"typing-dot"})]})}),(0,a.jsx)("div",{ref:w})]}),(0,a.jsxs)(o.E.div,{className:(0,l.cn)("chat-input-container",e&&"bg-gray-800 border-t border-gray-700"),initial:{y:50},animate:{y:0},transition:{type:"spring",stiffness:100},children:[(0,a.jsx)("input",{ref:C,type:"text",value:t,onChange:e=>{s(e.target.value),v(""===e.target.value.trim())},onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),E())},placeholder:"Type your message here...",className:(0,l.cn)("chat-input",e&&"bg-gray-700 text-white border-gray-600")}),(0,a.jsx)(o.E.button,{onClick:E,className:(0,l.cn)("send-button",x&&"disabled",e&&"bg-purple-600 hover:bg-purple-700"),whileHover:x?{}:{scale:1.05},whileTap:x?{}:{scale:.95},disabled:x,children:"Send"})]})]})}},45563:function(e,t,s){"use strict";s.d(t,{N:function(){return a}});let a=(0,s(2265).createContext)({isDark:!1,toggleDarkMode:()=>{}})},94508:function(e,t,s){"use strict";s.d(t,{cn:function(){return r}});var a=s(61994),n=s(53335);function r(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,n.m6)((0,a.W)(t))}},66458:function(){}},function(e){e.O(0,[6256,6137,1428,2971,2117,1744],function(){return e(e.s=99938)}),_N_E=e.O()}]);